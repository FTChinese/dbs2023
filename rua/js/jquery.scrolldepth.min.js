var st = !1;
! function (e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? module.exports = e(require("jquery")) : e(jQuery)
}(function (e) {
    "use strict";
    var n = window.location.href;
    $.ajax({
        url: "/_ajax/checkScrollDepthIsArticle.ashx",
        type: "POST",
        async: !1,
        data: {
            pageURL: n.substring(n.lastIndexOf("/"))
        },
        success: function (e) {
            "True" == e && (st = !0)
        }
    });
    var t, r, o, i, a = {
            minHeight: 0,
            elements: [],
            percentage: !0,
            userTiming: !0,
            pixelDepth: !0,
            nonInteraction: !0,
            gaGlobal: !1,
            gtmOverride: !1,
            trackerName: !1,
            dataLayer: "dataLayer"
        },
        l = e(window),
        c = [],
        u = !1,
        s = 0;
    return e.scrollDepth = function (n) {
        function p(e, a, l, c) {
            var u = n.trackerName ? n.trackerName + ".send" : "send";
            i ? (i({
                event: "ScrollDistance",
                eventCategory: "Scroll Depth",
                eventAction: e,
                eventLabel: a,
                eventValue: 1,
                eventNonInteraction: n.nonInteraction
            }), n.pixelDepth && arguments.length > 2 && l > s && (s = l, i({
                event: "ScrollDistance",
                eventCategory: "Scroll Depth",
                eventAction: "Pixel Depth",
                eventLabel: h(l),
                eventValue: 1,
                eventNonInteraction: n.nonInteraction
            })), n.userTiming && arguments.length > 3 && i({
                event: "ScrollTiming",
                eventCategory: "Scroll Depth",
                eventAction: e,
                eventLabel: a,
                eventTiming: c
            })) : (t && (window[o](u, "event", "Scroll Depth", e, a, 1, {
                nonInteraction: n.nonInteraction
            }), n.pixelDepth && arguments.length > 2 && l > s && (s = l, window[o](u, "event", "Scroll Depth", "Pixel Depth", h(l), 1, {
                nonInteraction: n.nonInteraction
            })), n.userTiming && arguments.length > 3 && window[o](u, "timing", "Scroll Depth", e, c, a)), r && (_gaq.push(["_trackEvent", "Scroll Depth", e, a, 1, n.nonInteraction]), n.pixelDepth && arguments.length > 2 && l > s && (s = l, _gaq.push(["_trackEvent", "Scroll Depth", "Pixel Depth", h(l), 1, n.nonInteraction])), n.userTiming && arguments.length > 3 && _gaq.push(["_trackTiming", "Scroll Depth", e, c, a, 100])))
        }

        function h(e) {
            return (250 * Math.floor(e / 250)).toString()
        }

        function g() {
            u = !0, l.on("scroll.scrollDepth", function (e, n) {
                var t, r, o, i = null,
                    a = 0,
                    l = function () {
                        a = new Date, i = null, o = e.apply(t, r)
                    };
                return function () {
                    var c = new Date;
                    a || (a = c);
                    var u = n - (c - a);
                    return t = this, r = arguments, 0 >= u ? (clearTimeout(i), i = null, a = c, o = e.apply(t, r)) : i || (i = setTimeout(l, u)), o
                }
            }(function () {
				
				var r, o, i, a, s;
				
				if (!st) {
					r = e(document).height(),
                    o = window.innerHeight ? window.innerHeight : l.height(),
                    i = l.scrollTop() + o,
                    a = function (e) {
                        return {
                            "25%": parseInt(.25 * e, 10),
                            "50%": parseInt(.5 * e, 10),
                            "75%": parseInt(.75 * e, 10),
                            "100%": e - 5
                        }
                    }(r),
                    s = +new Date - f;
				}
				else
				{
					r = e($("#___gatsby")).height(),
                    o = window.innerHeight ? window.innerHeight : l.height(),
                    i = l.scrollTop(),
                    a = function (e) {
						var ats = r - o;
                        return {
                            "25%": parseInt(.25 * ats, 10),
                            "50%": parseInt(.5 * ats, 10),
                            "75%": parseInt(.75 * ats, 10),
                            "100%": ats
                        }
                    }(r),
                    s = +new Date - f;			
				}
								
                return c.length >= n.elements.length + (n.percentage ? 4 : 0) ? (l.off("scroll.scrollDepth"), void(u = !1)) : (n.elements && function (n, t, r) {
                    e.each(n, function (n, o) {
                        -1 === e.inArray(o, c) && e(o).length && t >= e(o).offset().top && (p("Elements", o, t, r), c.push(o))
                    })
                }(n.elements, i, s), void(n.percentage && function (n, t, r) {
                    e.each(n, function (n, o) {
                        -1 === e.inArray(n, c) && t >= o && (p("Percentage", n, t, r), c.push(n))
                    })
                }(a, i, s)))
            }, 500))
        }
        var f = +new Date;
        n = e.extend({}, a, n), e(document).height() < n.minHeight || (n.gaGlobal ? (t = !0, o = n.gaGlobal) : "function" == typeof ga ? (t = !0, o = "ga") : "function" == typeof __gaTracker && (t = !0, o = "__gaTracker"), "undefined" != typeof _gaq && "function" == typeof _gaq.push && (r = !0), "function" == typeof n.eventHandler ? i = n.eventHandler : void 0 === window[n.dataLayer] || "function" != typeof window[n.dataLayer].push || n.gtmOverride || (i = function (e) {
            window[n.dataLayer].push(e)
        }), e.scrollDepth.reset = function () {
            c = [], s = 0, l.off("scroll.scrollDepth"), g()
        }, e.scrollDepth.addElements = function (t) {
            void 0 !== t && e.isArray(t) && (e.merge(n.elements, t), u || g())
        }, e.scrollDepth.removeElements = function (t) {
            void 0 !== t && e.isArray(t) && e.each(t, function (t, r) {
                var o = e.inArray(r, n.elements),
                    i = e.inArray(r, c); - 1 != o && n.elements.splice(o, 1), -1 != i && c.splice(i, 1)
            })
        }, g())
    }, e.scrollDepth
});
